// To get started, press Ctrl+Space (or Option+Esc) to bring up the completion menu and view the available nodes.

// You can also use the buttons in the sidebar to perform actions on nodes.
// Actions currently available include:

// * Enabling / disabling the node
// * Adding the bus to a bus
// * Removing the node
// * Connecting ADC channels

// For more help, browse the DeviceTree documentation at https://docs.zephyrproject.org/latest/guides/dts/index.html
// You can also visit the nRF DeviceTree extension documentation at https://nrfconnect.github.io/vscode-nrf-connect/devicetree/nrfdevicetree.html


&gpio0 {
	status = "okay";
};


/ {
	zephyr,user {
		LEDR-gpios = <&gpio0 9 GPIO_ACTIVE_HIGH>;
		LEDG-gpios = <&gpio0 10 GPIO_ACTIVE_HIGH>;

		state0-gpios = <&gpio0 8 GPIO_ACTIVE_HIGH>;
		state1-gpios = <&gpio0 12 GPIO_ACTIVE_HIGH>;
		state2-gpios = <&gpio0 13 GPIO_ACTIVE_HIGH>;
		stateSet-gpios = <&gpio0 18 GPIO_ACTIVE_HIGH>; 		

		rangeHigh-gpios = <&gpio0 2 GPIO_ACTIVE_HIGH>;		

		updateConfig-gpios = <&gpio0 29 GPIO_ACTIVE_HIGH>;

		shutdown-gpios = <&gpio0 30 GPIO_ACTIVE_HIGH>;

		IOExpINTn-gpios = <&gpio0 16 GPIO_ACTIVE_HIGH>;

		// Reactive Signal from Pi
		Event-gpios = <&gpio0 3 GPIO_ACTIVE_HIGH>;

		// Low Voltage signal from U14
		LowV-gpios = <&gpio0 26 GPIO_ACTIVE_HIGH>;

		// External ADC
		ADC3Convstn-gpios = <&gpio0 14 GPIO_ACTIVE_HIGH>;
		ADC3Rstn-gpios = <&gpio0 15 GPIO_ACTIVE_HIGH>;

		// MPPT Bypass Option
		MPPTBypassOff-gpios = <&gpio0 4 GPIO_ACTIVE_HIGH>;
		MPPTBypassOffn-gpios = <&gpio0 5 GPIO_ACTIVE_HIGH>;

		// ONLY FOR I2C DEBUG
		/*
		LED1-gpios = <&gpio0 26 GPIO_ACTIVE_HIGH>;
		LED2-gpios = <&gpio0 02 GPIO_ACTIVE_HIGH>;
		LED3-gpios = <&gpio0 25 GPIO_ACTIVE_HIGH>;
		LED4-gpios = <&gpio0 24 GPIO_ACTIVE_HIGH>;
		LED5-gpios = <&gpio0 23 GPIO_ACTIVE_HIGH>;
		LED6-gpios = <&gpio0 22 GPIO_ACTIVE_HIGH>;
		LED7-gpios = <&gpio0 20 GPIO_ACTIVE_HIGH>;
		LED8-gpios = <&gpio0 19 GPIO_ACTIVE_HIGH>;
		LED9-gpios = <&gpio0 17 GPIO_ACTIVE_HIGH>;
		 */
		
	};
};

&spi2 {
	compatible = "nordic,nrf-spi";
	status = "okay";
	cs-gpios = <&gpio0 11 GPIO_ACTIVE_LOW>;
	pinctrl-0 = <&spi2_default>;
	pinctrl-1 = <&spi2_sleep>;
	pinctrl-names = "default", "sleep";
	ADC3: adc3@0 {
		reg = <0>;
		spi-max-frequency = < DT_FREQ_M(8) >;
		label = "AD7091";
	};
 };


&i2c0 {
	status = "okay";
};

&i2c0 {
	clock-frequency = <I2C_BITRATE_STANDARD>;
	compatible = "nordic,nrf-twi";
	pinctrl-0 = <&i2c0_default>;
	pinctrl-1 = <&i2c0_sleep>;
	pinctrl-names = "default", "sleep";
};

&pinctrl {
	i2c0_default: i2c0_default {
		group1 {
			psels = <NRF_PSEL(TWIM_SCL, 0, 19)>, <NRF_PSEL(TWIM_SDA, 0, 20)>; 		
		};
	};

	i2c0_sleep: i2c0_sleep {
		group1 {
			psels = <NRF_PSEL(TWIM_SDA, 0, 20)>, <NRF_PSEL(TWIM_SCL, 0, 19)>; 
			low-power-enable;
		};
	};

	uart0_default: uart0_default {
		group1 {
			psels = <NRF_PSEL(UART_TX, 0, 27)>, <NRF_PSEL(UART_RX, 0, 28)>;
			//psels = <NRF_PSEL(UART_TX, 0, 15)>, <NRF_PSEL(UART_RX, 0, 28)>;
		};
	};

	uart0_sleep: uart0_sleep {
		group1 {
			psels = <NRF_PSEL(UART_TX, 0, 27)>, <NRF_PSEL(UART_RX, 0, 28)>;
			//psels = <NRF_PSEL(UART_TX, 0, 15)>, <NRF_PSEL(UART_RX, 0, 28)>;
			low-power-enable;
		};
	};

	pdm0_default_alt: pdm0_default_alt {
		group1 {
			psels = <NRF_PSEL(PDM_CLK, 0, 6)>, <NRF_PSEL(PDM_DIN, 0, 7)>;
		};
	};

	spi2_default: spi2_default {
		group1 {
				psels = <NRF_PSEL(SPIM_SCK, 0, 6)>,
						<NRF_PSEL(SPIM_MOSI, 0, 8)>,
						<NRF_PSEL(SPIM_MISO, 0, 7)>;
		};
	};
	spi2_sleep: spi2_sleep {
		group1 {
				psels = <NRF_PSEL(SPIM_SCK, 0, 6)>,
						<NRF_PSEL(SPIM_MOSI, 0, 8)>,
						<NRF_PSEL(SPIM_MISO, 0, 7)>;
				low-power-enable;
		};
};

};

&i2c0 {
	tmp: tmp@48{
        compatible = "i2c-device";
        reg = < 0x48 >;
        label = "TMP117";
    };
	imu: imu@68{
        compatible = "i2c-device";
        reg = < 0x68 >;
        label = "ICM-42670-P";
    };
	pms: pms@5a{
        compatible = "i2c-device";
        reg = < 0x5A >;
        label = "STHS34PF80";
    };
	tof: tof@29{
        compatible = "i2c-device";
        reg = < 0x29 >;
        label = "VL53L1C";
    };
	bio: bio@55{
        compatible = "i2c-device";
        reg = < 0x55 >;
        label = "MAX32664D";
    };
	gps: gps@10{
        compatible = "i2c-device";
        reg = < 0x10 >;
        label = "LG77LICMD";
    };
	col: col@44{
        compatible = "i2c-device";
        reg = < 0x44 >;
        label = "OPT4060";
    };
	bps: bps@76{
		compatible = "i2c-device";
		reg = < 0x76 >;
		label = "DPS368";
	};
	air: air@76{
		compatible = "i2c-device";
		reg = < 0x76 >;
		label = "BME688";
	};
	IOExpander: IOExpander@74{
        compatible = "i2c-device";
        reg = < 0x74 >;
        label = "PCA9539";
    };
	I2CSwitch: I2CSwitch@77{
        compatible = "i2c-device";
        reg = < 0x77 >;
        label = "TCA9548";
    };
	generalcall: generalcall@0{
        compatible = "i2c-device";
        reg = < 0x00 >;
        label = "General Call Address";
    };
};

&uart0 {
	status = "okay"; 					
	pinctrl-0 = <&uart0_default>;
	pinctrl-1 = <&uart0_sleep>;
	pinctrl-names = "default", "sleep";
	current-speed = <115200>;
};

&uart0 {
	disable-rx;
};

&uart0 {
	/delete-property/ disable-rx;
};

&timer0 {
	status = "disabled";
};

&timer0 {
	status = "okay";
};

&timer0 {
	status = "disabled";
};

&timer0 {
	status = "okay";
};

dmic_dev: &pdm0 {
	status = "disabled";
	pinctrl-0 = <&pdm0_default_alt>;
	pinctrl-names = "default";
	clock-source = "PCLK32M_HFXO";
	//queue-size = <2>;
};

